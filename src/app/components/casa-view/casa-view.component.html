<div class="container-fluid animated fadeIn fast mt-3">
  <div class="card mb-3 border-primary">
    <div class="card-header border-primary text-center">
      <h4> {{ casa.nombre_casa}} </h4>
    </div>
    <div class="pt-4 text-center mb-3">
      <img [src]="rutaimgCasa+casa.principal_img" alt="img_principal" class="figure-img img-fluid rounded mx-auto"
           width="950" height="650">
    </div>
    <div class="card-body text-center">
      <h4>Imágenes Generales.</h4>
      <owl-carousel-o [options]="customOptions">
        <ng-template carouselSlide *ngFor="let img of imgs">
          <div class="slide">
            <img [src]="rutaimgCasa+img.ruta_imagen_casa" alt="imgs" width="300" height="300"
                 class="p-1 figure-img rounded">
          </div>
        </ng-template>
      </owl-carousel-o>
      <hr>
      <div class="container-fluid text-left">
        <h4>Descripción.</h4>
        <p> {{casa.descripcion_casa}} </p>
      </div>
      <div class="container-fluid text-left">
        <h4>Direccion.</h4>
        <p> {{casa.direccion_casa}} </p>
      </div>
      <hr>
      <hr>
      <div class="container-fluid text-left" *ngIf="casa.instalaciones_cal == null">
        <!--
        <h4>Calificaciónes de la casa.</h4>
          <h5>Instalaciones {{casa.instalaciones_cal}} </h5>
          <h5>Limpieza {{casa.limpieza_cal}} </h5>
          <h5>Ambiente {{casa.ambiente_cal}} </h5>
        -->
      </div>
    </div>
  </div>
  <!--
      <ng-container *ngIf="puedeComentar == false && cancelado == false">
          <div class="card mb-3 border-success" *ngFor="let boleto of boletos">
              <div class="card-header border-success">
                  <h4> {{boleto.nom_bol}} </h4>
              </div>
              <div class="card-body">
                  <div class="row h-100">
                      <div class="col-md-7">
                          <h5>Descripción</h5>
                          <p> {{ boleto.descripcion_boleto }} </p>
                      </div>
                      <div class="col-md-2 my-auto text-center">
                          <h5>Precio</h5>
                          <p>{{boleto.precio_actual_boleto | currency:'MXN':'symbol'}} </p>
                      </div>
                      <div class="col-md-3 my-auto">
                          <div class="input-group inline-group m-0 p-0 justify-content-center align-items-center">
                              <div class="input-group-prepend">
                                  <button class="btn btn-outline-secondary btn-minus" (click)="cantBoleto.stepDown()">
                              <i class="fa fa-minus"></i>
                            </button>
                              </div>
                              <div class="w-25 m-0">
                                  <input #cantBoleto class="form-control quantity text-center" min="1" value="1" type="number" disabled>
                              </div>
                              <div class="input-group-append">
                                  <button class="btn btn-outline-secondary btn-plus" (click)="cantBoleto.stepUp()">
                          <i class="fa fa-plus"></i>
                        </button>
                              </div>
                          </div>
                          <div class="text-center mt-3">
                              <button type="button" class="btn btn-outline-success" (click)="agregarCarrito(boleto.nom_bol, boleto.precio_actual_boleto, cantBoleto.value, boleto.id_boleto)">Agregar al Carrito</button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </ng-container>

  -->
  <ng-container *ngIf="!noCuartos">
    <div class="card mb-3 border-success" *ngFor="let cuarto of cuartos">
      <div class="card-header border-success">
        <div class="row">
          <div class="col-md-6">
            <h4> {{cuarto.nombre_cuarto}} </h4>
          </div>
          <div class="col-md-6">
            <button class="btn btn-success float-right m-1" (click)="verCuarto( cuarto.id_cuarto )">Ver Mas</button>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="row h-100">
          <div class="col-md-12">
            <h5>Descripción</h5>
            <p> {{cuarto.descripcion_cuarto}} </p>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <div class="card">
    <div class="card-header">
      <h4>Comentarios.</h4>
    </div>
    <div class="card-footer" *ngIf="comentar == true">
      <div class="row mt-2">
        <h5>Califique la casa</h5>
        <br>
        <div class="col-md-3 text-center">
          <h6>Instalaciones<small> (1 - 10)</small></h6>
          <div class="input-group inline-group m-0 p-0 justify-content-center align-items-center">
            <div class="input-group-prepend">
              <button class="btn btn-outline-secondary btn-minus" (click)="cal_instalaciones.stepDown()">
                <i class="fa fa-minus"></i>
              </button>
            </div>
            <div class="w-25 m-0">
              <input #cal_instalaciones class="form-control quantity text-center" min="1" max="10" value="1" step="1"
                     type="number" disabled>
            </div>
            <div class="input-group-append">
              <button class="btn btn-outline-secondary btn-plus" (click)="cal_instalaciones.stepUp()">
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
          <h6>Ambiente<small> (1 - 10)</small></h6>
          <div class="input-group inline-group m-0 p-0 justify-content-center align-items-center">
            <div class="input-group-prepend">
              <button class="btn btn-outline-secondary btn-minus" (click)="cal_ambiente.stepDown()">
                <i class="fa fa-minus"></i>
              </button>
            </div>
            <div class="w-25 m-0">
              <input #cal_ambiente class="form-control quantity text-center" min="1" max="10" value="1" step="1"
                     type="number" disabled>
            </div>
            <div class="input-group-append">
              <button class="btn btn-outline-secondary btn-plus" (click)="cal_ambiente.stepUp()">
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
          <h6>Limpieza<small> (1 - 10)</small></h6>
          <div class="input-group inline-group m-0 p-0 justify-content-center align-items-center">
            <div class="input-group-prepend">
              <button class="btn btn-outline-secondary btn-minus" (click)="cal_limpieza.stepDown()">
                <i class="fa fa-minus"></i>
              </button>
            </div>
            <div class="w-25 m-0">
              <input #cal_limpieza class="form-control quantity text-center" min="1" max="10" value="1" step="1"
                     type="number" disabled>
            </div>
            <div class="input-group-append">
              <button class="btn btn-outline-secondary btn-plus" (click)="cal_limpieza.stepUp()">
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="col-md-7">
          <div style="height: 100%;">
            <textarea style="resize: none; height: 100%;" class="form-control" cols="290" rows="3" placeholder="Agrega un Comentario"
                      #comentar
                      (keyup.enter)="insertarComentario(comentar.value, cal_instalaciones.value, cal_ambiente.value, cal_limpieza.value)"></textarea>
          </div>
        </div>
        <div class="comentar">
          <button class="btn btn-outline-primary mx-auto mt-4" type="button"
                  (click)="insertarComentario(comentar.value, cal_instalaciones.value, cal_ambiente.value, cal_limpieza.value)">
            Comentar
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col-md-10 d-block mx-auto text-center">
          <small>Sólo puede comentar una vez. Exprese bien su opinión en un solo comentario.</small>
        </div>
      </div>
    </div>
    <div class="card-body">
      <h5 class="text-danger" *ngIf="sinComentarios == true"> No hay comentarios. </h5>
      <ng-container *ngIf="sinComentarios == false">
        <div class="card" *ngFor="let comentario of comentarios">
          <div class="card-body">
            <div class="comentario">
              <div class="comentarioUsuario">
                <img src="{{comentario.foto}}" class="imgComentario"/>
              </div>
              <div style="width: 100%;">
                <h5 style="height:50px;align-self: center;line-height: 50px;">{{ comentario.nombre_usuario }}</h5>
                <h6>"{{ comentario.comentario }}"</h6>
                <div class="divider"></div>
                <div class="comentarioCalificaciones">
                  <p>Instalaciones: {{ comentario.limpieza }} Puntos</p>
                  <p>Ambiente: {{ comentario.ambiente }} Puntos</p>
                  <p>Limpieza: {{ comentario.instalaciones }} Puntos</p>
                </div>
              </div>

              <div class="">
                <button type="button" class="btn btn-danger mx-auto my-auto d-block" *ngIf="comentario.eliminar == true"
                        (click)="eliminarComentario(comentario.id_calificacion)">X
                </button>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>

<h1>Casas cercanas</h1>

<div class="row row-cols-1 row-cols-md-3 m-4">
  <div class="col-md-3" *ngFor="let closer of closerHouses; let i = index">
    <div class="card">
      <img class="card-img-top" [src]="rutaimgCasa+closer.principal_img" width="450px" height="300px"
           alt="Card image cap">
      <div class="card-body" style="height: 270px;">
        <div class="text-center">
          <h5> {{ closer.nombre_casa }} </h5>
        </div>
        <hr>
        <div>
          <h5>Descripción</h5>
          <p
            class="card-text"> {{ (closer.descripcion_casa.length > 150) ? (closer.descripcion_casa | slice:0:150) + '...' : (closer.descripcion_casa) }} </p>
        </div>
        <hr>
      </div>
      <div class="card-footer p-3">
        <button (click)="verCasa( closer.id_casa )" class="btn btn-block btn-outline-success">Ver m&aacute;s</button>
      </div>
    </div>
  </div>
</div>

<br>
<br>
<br>
<br>

<style>
  .comentarioUsuario{
    display: flex;
    margin-right: 10px;
  }

  .comentarioCalificaciones{
    display: flex;
    justify-content: space-between;
  }

  .imgComentario{
    margin: 5px;
    height: 50px;
    width: 50px;
    border-radius: 360px;
  }

  .comentario{
    display: flex;
  }

  .divider{
    margin: 15px 0 15px 0;
    border: 1px solid #000;
  }

  .comentar{
    display: flex;
    justify-content: center;
    width: 100%;
    margin-bottom: 20px;
  }
</style>
